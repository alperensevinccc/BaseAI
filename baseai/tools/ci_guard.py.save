from __future__ import annotations
import subprocess, sys

def run(cmd: list[str]) -> int:
    print("→", " ".join(cmd), flush=True)
    return subprocess.call(cmd)

def main() -> None:
    code = 0
    code |= run([sys.executable, "-m", "ruff", "check", ".", "--fix"]) or 0
    code |= run([sys.executable, "-m", "black", "."]) or 0
    run([sys.executable, "-m", "mypy", "baseai"])  # köprüleri ignore etsin
    code |= run([sys.executable, "-m", "pytest", "-q"]) or 0
    sys.exit(code)

if __name__ == "__main__":
    main()
